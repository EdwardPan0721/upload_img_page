<!DOCTYPE html>
<html>
  <body>
    <h3>多檔上傳 (jpg / png)</h3>

    <label>使用者 ID:</label>
    <input type="text" id="userId" placeholder="請輸入ID" /><br><br>

    <input type="file" id="files" multiple accept="image/png, image/jpeg" />
    <button onclick="uploadFiles()">上傳</button>
    <div id="result"></div>

    <script>
      function uploadFiles() {
        const userId = document.getElementById("userId").value.trim();
        if (!userId) {
          alert("請輸入使用者ID");
          return;
        }

        const files = document.getElementById("files").files;
        if (files.length === 0) {
          alert("請選擇至少一個檔案");
          return;
        }

        let formData = new FormData();
        formData.append("userId", userId); // 把ID傳到後端
        for (let i = 0; i < files.length; i++) {
          formData.append("files", files[i]);
        }

        fetch("https://script.google.com/macros/s/【你的GAS部署網址】/exec", {
          method: "POST",
          body: formData,
        })
          .then((res) => res.text())
          .then((text) => {
            document.getElementById("result").innerText = text;
          })
          .catch((err) => {
            document.getElementById("result").innerText = "上傳失敗: " + err;
          });
      }
    </script>
  </body>
</html>
